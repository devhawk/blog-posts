<div class="image-right"><p><a href="http://github.com/jschementi/agdlr"><img src="http://image.devhawk.net/blog-content/20090324-agdlr-0-5/agdlr-400_3.png" alt="agdlr-400" title="agdlr-400" /></a></p>
</div>
<p>I <a href="http://devhawk.net/2009/03/23/ironruby-0-3/">mentioned yesterday</a>
that it looked like a new release of
<a href="http://github.com/jschementi/agdlr">AgDLR</a> was eminent and sure enough
<a href="http://sdlsdk.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=25120">here it
is</a>.
There are some really cool new features including Silverlight 3
Transparent Platform Extension support, In-Browser REPL and In-Browser
testing of Silverlight apps. As with IronRuby 0.3, Jimmy <a href="http://feedproxy.google.com/%7Er/jimmy-thinking/%7E3/MB3l79dtHsM/silverlight-dynamic-languages-sdk-05.html">has the a
summary</a>
of the new AgDLR release.</p>
<p>One feature of the new release I did want to highlight was
<a href="http://github.com/jschementi/agdlr/blob/8a5693bb19d08f09b509d61d14733e0a7411b593/src/Chiron/XapHttpHandler.cs">XapHttpHandler</a>
because Iâ€™m the one who wrote it!
ðŸ˜„</p>
<p>The Silverlight versions of IronPython and IronRuby ship with a tool
called
<a href="http://www.codeplex.com/sdlsdk/Wiki/View.aspx?title=Chiron&amp;referringTitle=Getting%20Started">Chiron</a>
that provides a REPL-esque experience for building dynamic language
Silverlight apps. John Lam had <a href="http://www.iunknown.com/2008/03/dynamic-silverl.html">a good write-up on
Chiron</a> when we
first released it last year, but basically the idea is that Chiron is a
local web server that will auto-generate a <a href="http://blogs.msdn.com/katriend/archive/2008/03/16/silverlight-2-structure-of-the-new-xap-file-silverlight-packaged-application.aspx">Silverlight
XAP</a>
from a directory of Python and/or Ruby files on demand. For example, if
your HTML page requests a Silverlight app named app.xap, Chiron
automatically creates the app.xap file from the files in the app
directory. This lets you simply edit your Python and/or Ruby files
directly then refresh your browser to get the new version without
needing an explicit build step.</p>
<p>The problem is that, unlike IIS and the ASP.NET Development Server,
Chiron doesnâ€™t integrate with ASP.NET. So itâ€™s fine for building
Silverlight apps that stand alone or talk to 3rd party services. But if
you want to build a Silverlight app that talks back to itâ€™s ASP.NET
host, youâ€™re out of luck. Thatâ€™s where XapHttpHandler comes in.
XapHttpHandler does the same exact on-demand XAP packaging for dynamic
language Silverlight applications that Chiron does, but itâ€™s implemented
as an
<a href="http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.aspx">IHttpHandler</a>
so it plugs into the standard ASP.NET pipeline. All you have to do is
put the Chiron.exe in your web applicationâ€™s bin directory and <a href="http://github.com/jschementi/agdlr/blob/63a5ea3cf94068b87273531b5c96d84d8de983d2/utilities/chiron-http-handler/ChironHttpHandler.SampleSite/web.config#L86">add
XapHttpHandler to your
web.config</a>
like so:</p>
<div class="lang-xml editor-colors"><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">&lt;</span><span style="color:#A31515;">configuration</span><span style="color:Blue;">&gt;</span>
  <span style="color:Green;">&lt;!--remaining web.config content ommitted for clarity--&gt;</span>
  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">system.web</span><span style="color:Blue;">&gt;</span>
    <span style="color:Blue;">&lt;</span><span style="color:#A31515;">httpHandlers</span><span style="color:Blue;">&gt;</span>
      <span style="color:Blue;">&lt;</span><span style="color:#A31515;">add</span> <span style="color:Red;">verb</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">*</span><span style="color:Black;">&quot;</span> <span style="color:Red;">path</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">*.xap</span><span style="color:Black;">&quot;</span> <span style="color:Red;">validate</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">false</span><span style="color:Black;">&quot;</span>
           <span style="color:Red;">type</span><span style="color:Blue;">=</span><span style="color:Black;">&quot;</span><span style="color:Blue;">Chiron.XapHttpHandler,Chiron</span><span style="color:Black;">&quot;</span><span style="color:Blue;">/&gt;</span>
    <span style="color:Blue;">&lt;/</span><span style="color:#A31515;">httpHandlers</span><span style="color:Blue;">&gt;</span>
  <span style="color:Blue;">&lt;</span><span style="color:#A31515;">system.web</span><span style="color:Blue;">&gt;</span>
<span style="color:Blue;">&lt;/</span><span style="color:#A31515;">configuration</span><span style="color:Blue;">&gt;</span>

</pre></div>
</div>
<p>The new AgDLR drop includes <a href="http://github.com/jschementi/agdlr/tree/63a5ea3cf94068b87273531b5c96d84d8de983d2/utilities/chiron-http-handler/ChironHttpHandler.SampleSite">a sample
website</a>
that shows XapHttpHandler in action.</p>
<p>Quick note of caution: by design, XapHttpHandler does not cache the XAP
file â€“ itâ€™s generated anew on every request. So I would highly recommend
<em>against</em> using
XapHttpHandler on a production web server. Youâ€™re much better off using
Chiron to build a physical XAP file that you then deploy to your
production web server.</p>

{"status":"ok","post":{"id":1236,"type":"post","slug":"agdlr-0-5","url":"http:\/\/devhawk.net\/2009\/03\/24\/agdlr-0-5\/","status":"publish","title":"AgDLR 0.5","title_plain":"AgDLR 0.5","content":"<p><a href=\"http:\/\/github.com\/jschementi\/agdlr\"><img style=\"display: inline; margin-left: 0px; margin-right: 0px; border: 0px;\" title=\"agdlr-400\" src=\"http:\/\/s3.amazonaws.com\/devhawk_images\/WindowsLiveWriter\/AgDLR0.5_1433D\/agdlr-400_3.png\" class=\"grouped_elements\" rel=\"tc-fancybox-group1236\" border=\"0\" alt=\"agdlr-400\" width=\"240\" height=\"98\" align=\"right\" \/><\/a> I <a href=\"http:\/\/devhawk.net\/2009\/03\/23\/IronRuby+03.aspx\">mentioned yesterday<\/a> that it looked like a new release of <a href=\"http:\/\/github.com\/jschementi\/agdlr\">AgDLR<\/a> was eminent and sure enough <a href=\"http:\/\/sdlsdk.codeplex.com\/Release\/ProjectReleases.aspx?ReleaseId=25120\">here it is<\/a>. There are some really cool new features including Silverlight 3 Transparent Platform Extension support, In-Browser REPL and In-Browser testing of Silverlight apps. As with IronRuby 0.3, Jimmy <a href=\"http:\/\/feedproxy.google.com\/~r\/jimmy-thinking\/~3\/MB3l79dtHsM\/silverlight-dynamic-languages-sdk-05.html\">has the a summary<\/a> of the new AgDLR release.<\/p>\n<p>One feature of the new release I did want to highlight was <a href=\"http:\/\/github.com\/jschementi\/agdlr\/blob\/8a5693bb19d08f09b509d61d14733e0a7411b593\/src\/Chiron\/XapHttpHandler.cs\">XapHttpHandler<\/a> because I\u2019m the one who wrote it! <img src=\"http:\/\/devhawk.net\/wp-includes\/images\/smilies\/icon_smile.gif\" class=\"grouped_elements\" rel=\"tc-fancybox-group1236\" alt=\":)\" class=\"wp-smiley\" \/> <\/p>\n<p>The Silverlight versions of IronPython and IronRuby ship with a tool called <a href=\"http:\/\/www.codeplex.com\/sdlsdk\/Wiki\/View.aspx?title=Chiron&amp;referringTitle=Getting%20Started\">Chiron<\/a> that provides a REPL-esque experience for building dynamic language Silverlight apps. John Lam had <a href=\"http:\/\/www.iunknown.com\/2008\/03\/dynamic-silverl.html\">a good write-up on Chiron<\/a> when we first released it last year, but basically the idea is that Chiron is a local web server that will auto-generate a <a href=\"http:\/\/blogs.msdn.com\/katriend\/archive\/2008\/03\/16\/silverlight-2-structure-of-the-new-xap-file-silverlight-packaged-application.aspx\">Silverlight XAP<\/a> from a directory of Python and\/or Ruby files on demand. For example, if your HTML page requests a Silverlight app named app.xap, Chiron automatically creates the app.xap file from the files in the app directory. This lets you simply edit your Python and\/or Ruby files directly then refresh your browser to get the new version without needing an explicit build step.<\/p>\n<p>The problem is that, unlike IIS and the ASP.NET Development Server, Chiron doesn\u2019t integrate with ASP.NET. So it\u2019s fine for building Silverlight apps that stand alone or talk to 3rd party services. But if you want to build a Silverlight app that talks back to it\u2019s ASP.NET host, you\u2019re out of luck. That\u2019s where XapHttpHandler comes in. XapHttpHandler does the same exact on-demand XAP packaging for dynamic language Silverlight applications that Chiron does, but it\u2019s implemented as an <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/system.web.ihttphandler.aspx\">IHttpHandler<\/a> so it plugs into the standard ASP.NET pipeline. All you have to do is put the Chiron.exe in your web application\u2019s bin directory and <a href=\"http:\/\/github.com\/jschementi\/agdlr\/blob\/63a5ea3cf94068b87273531b5c96d84d8de983d2\/utilities\/chiron-http-handler\/ChironHttpHandler.SampleSite\/web.config#L86\">add XapHttpHandler to your web.config<\/a> like so:<\/p>\n<pre class=\"brush:xml\">&lt;configuration&gt;\r\n  &lt;!--remaining web.config content ommitted for clarity--&gt;\r\n  &lt;system.web&gt;\r\n    &lt;httpHandlers&gt;\r\n      &lt;add verb=\"*\" path=\"*.xap\" validate=\"false\" \r\n           type=\"Chiron.XapHttpHandler,Chiron\"\/&gt;\r\n    &lt;\/httpHandlers&gt;\r\n  &lt;system.web&gt;\r\n&lt;\/configuration&gt;<\/pre>\n<p>The new AgDLR drop includes <a href=\"http:\/\/github.com\/jschementi\/agdlr\/tree\/63a5ea3cf94068b87273531b5c96d84d8de983d2\/utilities\/chiron-http-handler\/ChironHttpHandler.SampleSite\">a sample website<\/a> that shows XapHttpHandler in action.<\/p>\n<p>Quick note of caution: by design, XapHttpHandler does not cache the XAP file &#8211; it\u2019s generated anew on every request. So I would highly recommend <span style=\"text-decoration: underline;\">against<\/span> using XapHttpHandler on a production web server. You\u2019re much better off using Chiron to build a physical XAP file that you then deploy to your production web server.<\/p>\n","excerpt":"<p>I mentioned yesterday that it looked like a new release of AgDLR was eminent and sure enough here it is. There are some really cool new features including Silverlight 3 Transparent Platform Extension support, In-Browser REPL and In-Browser testing of Silverlight apps. As with IronRuby 0.3, Jimmy has the a summary of the new AgDLR [&hellip;]<\/p>\n","date":"2009-03-24 23:25:42","modified":"2011-04-17 01:09:56","categories":[{"id":252,"slug":"ironpython","title":"IronPython","description":"","parent":0,"post_count":99}],"tags":[{"id":231,"slug":"dlr","title":"DLR","description":"","post_count":25},{"id":200,"slug":"silverlight","title":"Silverlight","description":"","post_count":20}],"author":{"id":1,"slug":"admin","name":"DevHawk","first_name":"Harry","last_name":"Pierson","nickname":"DevHawk","url":"","description":""},"comments":[{"id":2184,"name":"Chris Cavanagh","url":"http:\/\/chriscavanagh.wordpress.com","date":"2009-03-25 10:42:06","content":"<p>Hi Harry &#8211; A few questions <img src=\"http:\/\/devhawk.net\/wp-includes\/images\/smilies\/icon_smile.gif\" alt=\":)\" class=\"wp-smiley\" \/>  &#8230;<\/p>\n<p>1) Is Chiron restricted to IronRuby\/Python or is it extensible somehow? (saw it in DLR sources but ignored so far)<br \/>\n2) When the XapHttpHandler references it, is it forced to go out of process?  Is that the only way to build Silverlight assemblies from within a .NET process, or are there alternatives? (separate appdomain maybe).<br \/>\n3) Related to (2), what kind of performance overhead is there?  Caching or not, I&#8217;m curious about any out-of-process hit&#8230;<\/p>\n<p>For some projects I&#8217;m working on, I&#8217;ve been kicking around the idea of dynamic server-compiled DLR assemblies (but using custom stuff instead of IronRuby\/Python).  It&#8217;d be interesting to know what options I have :o)<\/p>\n<p>Any suggestions \/ ideas appreciated!<\/p>\n","parent":0},{"id":2185,"name":"DevHawk","url":"","date":"2009-03-25 13:34:18","content":"<p>@Chris:<\/p>\n<p>1. Chrion is extensible in that you can add dynamic languages and change the default AppManifest.xaml file that gets generated. Check out Chiron.exe.config for more information.<\/p>\n<p>2. No, when you use XapHttpHandler you&#8217;re loading Chiron as a library &#8211; yes, even though Chiron&#8217;s an EXE. It&#8217;s kinda wierd, but the only difference between a managed DLL and EXE is the inclusion of an entrypoint in the EXE. <\/p>\n<p>3. Given that it&#8217;s only recommended for use in your dev environment, I haven&#8217;t done any perf testing on it at all. If you needed something faster, you could always take the source code and make your own improvements.<\/p>\n<p>Good luck with your project. I&#8217;d love to hear more about it when you get a chance. <\/p>\n","parent":0}],"attachments":[],"comment_count":2,"comment_status":"closed","custom_fields":{"dasblog_entryid":["cbfe07b7-55ff-497a-9edb-154fd819e1ed"],"dasblog_compressedtitle":["AgDLR+05"],"dasblog_compressedtitleunique":["2009\/03\/25\/AgDLR+05"]}},"previous_url":"http:\/\/devhawk.net\/2009\/03\/23\/ironruby-0-3\/","next_url":"http:\/\/devhawk.net\/2009\/03\/25\/writing-an-ironpython-debugger-getting-local-variables\/"}
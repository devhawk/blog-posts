<?xml version="1.0" encoding="utf-8"?>
<item>
  <title>Minor DasBlog Bugfix</title>
  <link>http://devhawk.net/2003/12/08/minor-dasblog-bugfix/</link>
  <pubDate>Mon, 08 Dec 2003 15:38:38 +0000</pubDate>
  <dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">devhawk</dc:creator>
  <guid isPermaLink="false">http://3e585d35-7570-4538-b7e9-ea04df02df10</guid>
  <description></description>
  <content:encoded xmlns:content="http://purl.org/rss/1.0/modules/content/"><![CDATA[<p>A few months ago, one of my first enhancements I made to dasBlog was to change the way the CommentView page is rendered. Previously, it was rendered using the item template. However, I don't include the entry post date in the item template, since it's in big bold letters on the day template. So I changed the CommentView to render the single entry being displayed using the day template. This makes the CommentView page consistent with the Permalink page, which also renders the single entry using the day template. </p><p>However, when I made the change, I introduced a bug that shipped as part of the v1.4 release. When I called ProcessDayTemplate, I passed in the entry's CreatedUtc time as the day to render parameter. This caused an issue where the CommentView would not render the entry when the day of the CreatedUtc did not equal the time-zone adjusted created date. For example, if I posted a new entry at 8pm PST, that is 4am UTC the following day. So if I ask to render the UTC based date, the time-zone adjusted entry does not fall on that day, and thus doesn't render. So I changed the call to ProcessDayTemplate to use the entry's CreatedLocalTime property instead of the CreatedUtc. I tested, all seemed good, so I submitted the fix, which made it into the v1.5 release.</p><p>Today, I noticed a <a href="http://www.gotdotnet.com/Community/MessageBoard/Thread.aspx?id=170130">thread</a> on the dasBlog <a href="http://www.gotdotnet.com/Community/Workspaces/workspace.aspx?id=77a29128-4746-4473-b676-e4f1517a1907">GDN workspace</a> indicating the bug was still there. A little bit of tracking down and I discovered that what the server thinks is the local time does not always match what dasBlog thinks the local time is. CreatedLocalTime is based on the server local time. If you run your server in a different time zone than dasBlog is configured for, you run into basically the same issue as before. Of course, since I run my dev server in the same timezone as dasBlog, I never noticed it. However, since my production server is on the east coast and I'm on the west coast, the issue showed up on my production machine.</p><p>I posted a code fix over on the <a href="http://www.gotdotnet.com/Community/MessageBoard/Thread.aspx?id=170130">GDN Message Board Thread</a>. Basically, I calculate the correct time based off the dasBlog configured time zone. Seems to have fixed the problem on my dev and production machines. (I'm running my dev machine in a different time zone now). Let me know if you run into any more issues.</p>]]></content:encoded>
  <excerpt:encoded xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"><![CDATA[]]></excerpt:encoded>
  <wp:post_id xmlns:wp="http://wordpress.org/export/1.2/">241</wp:post_id>
  <wp:post_date xmlns:wp="http://wordpress.org/export/1.2/">2003-12-08 15:38:38</wp:post_date>
  <wp:post_date_gmt xmlns:wp="http://wordpress.org/export/1.2/">2003-12-08 15:38:38</wp:post_date_gmt>
  <wp:comment_status xmlns:wp="http://wordpress.org/export/1.2/">open</wp:comment_status>
  <wp:ping_status xmlns:wp="http://wordpress.org/export/1.2/">open</wp:ping_status>
  <wp:post_name xmlns:wp="http://wordpress.org/export/1.2/">minor-dasblog-bugfix</wp:post_name>
  <wp:status xmlns:wp="http://wordpress.org/export/1.2/">publish</wp:status>
  <wp:post_parent xmlns:wp="http://wordpress.org/export/1.2/">0</wp:post_parent>
  <wp:menu_order xmlns:wp="http://wordpress.org/export/1.2/">0</wp:menu_order>
  <wp:post_type xmlns:wp="http://wordpress.org/export/1.2/">post</wp:post_type>
  <wp:post_password xmlns:wp="http://wordpress.org/export/1.2/"></wp:post_password>
  <wp:is_sticky xmlns:wp="http://wordpress.org/export/1.2/">0</wp:is_sticky>
  <category domain="post_tag" nicename="blogging"><![CDATA[Blogging]]></category>
  <category domain="post_tag" nicename="dasblog"><![CDATA[dasBlog]]></category>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta xmlns:wp="http://wordpress.org/export/1.2/">
    <wp:meta_key>dasblog_entryid</wp:meta_key>
    <wp:meta_value><![CDATA[3e585d35-7570-4538-b7e9-ea04df02df10]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta xmlns:wp="http://wordpress.org/export/1.2/">
    <wp:meta_key>dasblog_compressedtitle</wp:meta_key>
    <wp:meta_value><![CDATA[Minor+DasBlog+Bugfix]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta xmlns:wp="http://wordpress.org/export/1.2/">
    <wp:meta_key>dasblog_compressedtitleunique</wp:meta_key>
    <wp:meta_value><![CDATA[2003/12/08/Minor+DasBlog+Bugfix]]></wp:meta_value>
  </wp:postmeta>
  <wp:comment xmlns:wp="http://wordpress.org/export/1.2/">
    <wp:comment_id>2922</wp:comment_id>
    <wp:comment_author><![CDATA[Scott Hanselman]]></wp:comment_author>
    <wp:comment_author_email></wp:comment_author_email>
    <wp:comment_author_url>http://www.computerzen.com</wp:comment_author_url>
    <wp:comment_author_IP></wp:comment_author_IP>
    <wp:comment_date>2003-12-09 11:14:31</wp:comment_date>
    <wp:comment_date_gmt>2003-12-09 19:14:31</wp:comment_date_gmt>
    <wp:comment_content><![CDATA[And I thank you for it! 

Scott "Glucose" Hanselman]]></wp:comment_content>
    <wp:comment_approved>1</wp:comment_approved>
    <wp:comment_type></wp:comment_type>
    <wp:comment_parent>0</wp:comment_parent>
    <wp:comment_user_id>0</wp:comment_user_id>
  </wp:comment>
  <wp:comment xmlns:wp="http://wordpress.org/export/1.2/">
    <wp:comment_id>2923</wp:comment_id>
    <wp:comment_author><![CDATA[Richard Tallent]]></wp:comment_author>
    <wp:comment_author_email>richard@tallent.us</wp:comment_author_email>
    <wp:comment_author_url>http://www.tallent.us/</wp:comment_author_url>
    <wp:comment_author_IP></wp:comment_author_IP>
    <wp:comment_date>2003-12-10 11:00:17</wp:comment_date>
    <wp:comment_date_gmt>2003-12-10 19:00:17</wp:comment_date_gmt>
    <wp:comment_content><![CDATA[Grr... I've been bitten hard by that bug, or another one very much like it in v1.2. A good number of my old BlogX items and comments just won't render in dasBlog. Omar Shahine has been helping me out, but if you have any other suggestions (such as how to re-generate the dayextra files with the correct comments in each, renaming won't work since I post at all hours of the day and night), I'm all ears...]]></wp:comment_content>
    <wp:comment_approved>1</wp:comment_approved>
    <wp:comment_type></wp:comment_type>
    <wp:comment_parent>0</wp:comment_parent>
    <wp:comment_user_id>0</wp:comment_user_id>
  </wp:comment>
</item>
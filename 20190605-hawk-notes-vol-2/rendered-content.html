<p>Obviously, I’ve been pretty bad about keeping this blog up to date. That applies to both the content of the blog as well as the blog engine. Frankly, the <a href="http://devhawk.net/blog/2015/9/8/hawk-notes-vol-1">last time I updated my blog code</a> before last weekend was <em>four years ago</em>. At the time, ASP.NET Core was still called ASP.NET 5 and the latest version was Preview 7. Before posting <a href="http://devhawk.net/blog/2019/6/2/my-next-adventure">my recent announcement</a>, I thought it might be a good idea to at least get Hawk running on a released version of ASP.NET Core.</p>
<p>Once I got my code updated to the latest version of ASP.NET, I decided actually add some functionality. When I built out Hawk, I focused primarily on how the site was going to render my existing content. I didn’t give much though to how I would write new blog posts. That turned out to be a bad decision. Writing new posts turned out to be such a huge pain in the butt that I never made time for writing new posts. With the new job, I want to go back to blogging much more often. So I figured I should take at least some small steps to make writing new posts easier.</p>
<p>As I wrote in <a href="http://devhawk.net/blog/2015/9/8/hawk-notes-vol-1">my previous Hawk Note</a> (four years ago…sigh), Hawk loads all the post metadata into memory on startup. It supports loading posts from either the file system as well as from Azure Storage. The master copy of my posts are stored in their own <s>Visual Studio Online</s> <s>Visual Studio Team Services</s> Azure DevOps Repo. Moving posts from the git repo into azure storage turned out the be the biggest publishing obstacle. So I decided to eliminate that step. If you’re reading this, I guess it worked!</p>
<p>Since Hawk already supported multiple different post storage repositories, it was pretty straight forward to add a third repository that reads directly from the Azure Repo. I also added code to render the markdown to HTML using <a href="https://github.com/lunet-io/markdig">Markdig</a>, eliminating the need <a href="http://devhawk.net/blog/2015/9/2/the-brilliant-magic-of-edgejs">to use Edge.js</a><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p>
<p>Originally, I decided to store my blog posts in VSO (as it was known at the time) because it offered free private repos for personal use. While GitHub <a href="https://github.blog/2016-05-11-introducing-unlimited-private-repositories/">now offers</a> free private repos, I’ve decided to keep my posts in an Azure Repo because I find the <a href="https://docs.microsoft.com/en-us/rest/api/azure/devops/git/?view=azure-devops-rest-5.0">Azure DevOps REST interface</a> much easier to wrap my head around than <a href="https://github.blog/2016-09-14-the-github-graphql-api/">GitHub’s GraphQL based approach</a>. Yeah, I’m sure GraphQL is the better approach. But I was able to build a new post repository for Azure Repos - with markdown rendering provided by MarkDig - in just over 100 lines of code. For now anyway, easy and proven beats newer and more powerful.</p>
<p>Hawk pulling from the Azure Repo is the first step for creating a simple publishing process. Next, I will to set up a <a href="https://docs.microsoft.com/en-us/azure/devops/integrate/concepts/service-hooks?view=azure-devops">service hook</a> to automatically trigger a Hawk refresh when I push to the post repo master branch. Eventually, I also want to add image publishing and maybe some type tool to help author the post metadata (auto set the date, auto slugify the title, validate categories and tags, etc). I also want to re-enable comments, though social media makes that somewhat less important than it was back in the day. Regardless, I figure it’s best to tackle improvements incrementally. Last thing I want is another long silence on this blog.</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>Note, I might not use Edge.js in Hawk anymore, but I <em>still</em> think <a href="http://tomasz.janczuk.org/">Tomasz Janczuk</a> must be some kind of a wizard. <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

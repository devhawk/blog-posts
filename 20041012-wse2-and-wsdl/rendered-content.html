<p>I may be at Strategic Architect Forum, but Iâ€™ve actually been coding off
and on today -Â using WSE2 to expose web services. I hadnâ€™t realized that
<a href="http://msdn.microsoft.com/library/en-us/wseref/html/T_Microsoft_Web_Services2_Messaging_SoapService.asp">SoapService</a>Â supports
auto generation of WSDL â€“ pretty cool. I dug around with Reflector to
figure out how it works. Turns out that
<a href="http://msdn.microsoft.com/library/en-us/wseref/html/T_Microsoft_Web_Services2_Messaging_SoapReceiver.asp">SoapReceiver</a>
(parent of SoapService) exposes a method called
<a href="http://msdn.microsoft.com/library/en-us/wseref/html/M_Microsoft_Web_Services2_Messaging_SoapReceiver_GetDescription_1_19f87a31.asp">GetDescription</a>
that returns the WSDL as an XmlDocument. The SoapReceiver version of
GetDescription returns null, but the SoapService implementation uses an
internal class called WsdlCreator to generate construct a
<a href="http://msdn.microsoft.com/library/en-us/cpref/html/frlrfSystemWebServicesDescriptionServiceDescriptionClassTopic.asp">ServiceDescription</a>
from SoapService type that you write. Pretty cool.</p>
<p>The only downside is that if you use raw
<a href="http://msdn.microsoft.com/library/en-us/wseref/html/T_Microsoft_Web_Services2_SoapEnvelope.asp">SoapEnvelopes</a>
as the input and output parameter of the SoapService methods, the
WsdlCreator has no way to know what schema to use for the corrisponding
SOAP messages. So, it punts and represents a SoapEnvelope as sequence of
xsd:any tags.
ðŸ˜¦ If you
use XML serializable types for parameters, then the WsdlCreator
generates the associated schema in the WSDL. Only issue, I gave up on
XML serialization <a href="http://devhawk.net/2003/05/15/xml-is-not-just-a-deserialized-object-graph/">a while
ago</a>.</p>
<p>I wish there was a way to adorn the SoapService methods with an
attribute indicating the associated message schemas (with the ability
toÂ validate those messages automatically).</p>

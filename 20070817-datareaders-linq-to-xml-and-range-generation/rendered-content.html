<p>I’m doing a bunch of database / XML stuff @ work, so I decided to use to
<a href="http://msdn2.microsoft.com/en-us/vstudio/aa700831.aspx">VS08 beta 2</a> so
I can use LINQ. For reasons I don’t want to get into, I needed a way to
convert arbitrary database rows, read using a SqlDataReader, into XML.
LINQ to SQL was out, since the code has to work against arbitrary tables
(i.e. I have no compile time schema knowledge). But <del>XLinq</del> LINQ to XML helped
me out a ton. Check out this example:</p>
<div class="lang-csharp editor-colors"><div style="color:Black;background-color:White;"><pre>
<span style="color:Blue;">const</span> <span style="color:Blue;">string</span> ns = <span style="color:#A31515;">&quot;{http://some.sample.namespace.schema}&quot;</span>;

<span style="color:Blue;">while</span> (dr.Read())
{
    XElement rowXml = <span style="color:Blue;">new</span> XElement(ns + tableName,
        <span style="color:Blue;">from</span> i <span style="color:Blue;">in</span> GetRange(0, dr.FieldCount)
        <span style="color:Blue;">select</span> <span style="color:Blue;">new</span> XElement(ns + dr.GetName(i), dr.GetValue(i)));
}

</pre></div>
</div>
<p>That’s pretty cool. The only strange thing in there is the GetRange
method. I needed an easy way to build a range of integers from zero to
the number of fields in the data reader. I wasn’t sure of any standard
way, so I wrote this little two line function:</p>
<div class="lang-csharp editor-colors"><div style="color:Black;background-color:White;"><pre>
IEnumerable&lt;<span style="color:Blue;">int</span>&gt; GetRange(<span style="color:Blue;">int</span> min, <span style="color:Blue;">int</span> max)
{
    <span style="color:Blue;">for</span> (<span style="color:Blue;">int</span> i = min; i &lt; max; i++)
        <span style="color:Blue;">yield</span> <span style="color:Blue;">return</span> i;
}

</pre></div>
</div>
<p>It’s simple enough, but I found it strange that I couldn’t find a
standard way to generate a range with a more elegant syntax. Ruby has
standard range syntax that looks like (1..10), but I couldn’t find the
equivalent C#. Did I miss something, or am I really on my own to write
a GetRange function?</p>
<p><strong>Update</strong>: As expected, I
missed something. John Lewicki pointed me to the static
<a href="http://msdn2.microsoft.com/en-us/library/system.linq.enumerable.range(VS.90).aspx">Enumerable.Range</a>
method that does exactly what I needed.</p>
